<div class="text-center border-b border-gray-200 py-4 relative">
  <h2 class="text-xl font-semibold text-cyan-700">
    Choose a contribution amount
  </h2>
  <div class="absolute right-4 top-4 text-cyan-700 text-lg">â‚¹</div>
</div>

<div class="flex flex-col items-center my-6 px-4">
  <p class="text-gray-600 text-sm mb-4">
    Most contributors contribute approx
    <span class="font-semibold text-cyan-700">&#8377;2500</span> to this
    fundraiser.
  </p>

  <div class="flex flex-wrap gap-4 justify-center mb-6">
    <app-amount-selection
      *ngFor="let amt of fixedAmounts"
      [amount]="amt"
      [selected]="selectedAmount === amt"
      (amountSelected)="onAmountSelected($event)"
    ></app-amount-selection>
  </div>

  <app-amount-selection
    [amount]="null"
    [selected]="otherOptionSelected"
    (amountSelected)="onAmountSelected($event)"
  ></app-amount-selection>

  <div *ngIf="otherOptionSelected" class="mt-1 w-full max-w-xs mx-auto">
    <input
      type="number"
      class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400"
      placeholder="Enter custom amount"
      (change)="onCustomAmountChange($event.target.value)"
    />
  </div>

  <div
    class="bg-blue-50 border border-blue-100 rounded-md p-4 w-full max-w-lg text-sm text-gray-700"
  >
    <p class="mb-2">
      Ketto is charging 0% platform fee* for this fundraiser, relying solely on
      the generosity of contributors like you.
    </p>
    <div class="flex items-center gap-2">
      <span>Support us by adding a tip of:</span>
      <select
        [(ngModel)]="selectedTip"
        (change)="calculateTotalAmount()"
        class="border border-gray-300 rounded px-2 py-1 text-sm"
      >
        <option *ngFor="let tip of tipOptions" [value]="tip.value">
          {{ tip.label }}
        </option>
      </select>
    </div>
    <p class="mt-2 text-right font-semibold">
      Total Amount: â‚¹{{ totalAmount }}
    </p>
  </div>

  <form
    [formGroup]="userInfoForm"
    (ngSubmit)="formSubmitted()"
    class="w-full max-w-lg mx-auto space-y-6 mt-8"
  >
    <!-- Name Field -->
    <div class="relative">
      <input
        type="text"
        id="name"
        class="peer h-12 w-full border-b-2 border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:border-blue-600 pr-10"
        placeholder="Your Name"
        formControlName="name"
      />
      <label
        for="name"
        class="absolute left-0 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-3 peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-gray-600"
        >Name <span class="text-red-500">*</span></label
      >
      <div class="absolute right-2 top-3.5 text-gray-400 pointer-events-none">
        <i class="fas fa-user"></i>
      </div>
    </div>

    <!-- Email Field -->
    <div class="relative">
      <input
        type="email"
        id="email"
        class="peer h-12 w-full border-b-2 border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:border-blue-600 pr-10"
        placeholder="Your Email"
        formControlName="email"
      />
      <label
        for="email"
        class="absolute left-0 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-3 peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-gray-600"
        >Email <span class="text-red-500">*</span></label
      >
      <div class="absolute right-2 top-3.5 text-gray-400 pointer-events-none">
        <i class="fas fa-envelope"></i>
      </div>
    </div>

    <!-- Phone Field (with country code selector) -->
    <div class="flex items-center gap-2">
      <!-- Country Code Dropdown -->
      <select
        class="h-12 border-b-2 border-gray-300 bg-transparent text-sm text-gray-700 focus:outline-none focus:border-blue-600 pr-2 pl-1 w-[80px]"
      >
        <option value="+91">ðŸ‡®ðŸ‡³ +91</option>
      </select>

      <!-- Phone Number Input -->
      <div class="relative flex-1">
        <input
          type="tel"
          id="phone"
          class="peer h-12 w-full border-b-2 border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:border-blue-600 pr-10"
          placeholder="Mobile Number"
          formControlName="phone"
        />
        <label
          for="phone"
          class="absolute left-0 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-3 peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-gray-600"
          >Mobile Number <span class="text-red-500">*</span></label
        >
        <div class="absolute right-2 top-3.5 text-gray-400 pointer-events-none">
          <i class="fas fa-phone-alt"></i>
        </div>
      </div>
    </div>

    <!-- Address Field -->
    <div class="relative">
      <input
        id="address"
        class="peer h-12 w-full border-b-2 border-gray-300 text-gray-900 placeholder-transparent focus:outline-none focus:border-blue-600 pr-10"
        placeholder="Address"
        formControlName="address"
      />
      <label
        for="address"
        class="absolute left-0 -top-3.5 text-gray-600 text-sm transition-all peer-placeholder-shown:text-base peer-placeholder-shown:text-gray-400 peer-placeholder-shown:top-3 peer-focus:-top-3.5 peer-focus:text-sm peer-focus:text-gray-600"
        >Address <span class="text-red-500">*</span></label
      >
      <div class="absolute right-2 top-3.5 text-gray-400 pointer-events-none">
        <i class="fas fa-building"></i>
      </div>
    </div>

    <!-- Submit Button -->
    <div class="pt-4">
      <button
        type="submit"
        [disabled]="userInfoForm.invalid || totalAmount <= 0"
        class="w-full bg-blue-600 hover:bg-blue-700 text-white font-semibold py-3 px-6 rounded-md shadow transition duration-200"
      >
        Proceed To Pay {{ totalAmount }}
      </button>
    </div>
  </form>
</div>
